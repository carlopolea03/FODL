#pragma checksum "E:\Projects\FODL\FODL\FODLSystem\Views\FuelOil\Summary.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "63dcd9542ad5d4e297b85fb2608149dbbac87382"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_FuelOil_Summary), @"mvc.1.0.view", @"/Views/FuelOil/Summary.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/FuelOil/Summary.cshtml", typeof(AspNetCore.Views_FuelOil_Summary))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "E:\Projects\FODL\FODL\FODLSystem\Views\_ViewImports.cshtml"
using FODLSystem;

#line default
#line hidden
#line 2 "E:\Projects\FODL\FODL\FODLSystem\Views\_ViewImports.cshtml"
using FODLSystem.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"63dcd9542ad5d4e297b85fb2608149dbbac87382", @"/Views/FuelOil/Summary.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"4ece4c88a6f9d0d3616d5d6ccde3e61c949832c8", @"/Views/_ViewImports.cshtml")]
    public class Views_FuelOil_Summary : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(0, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 2 "E:\Projects\FODL\FODL\FODLSystem\Views\FuelOil\Summary.cshtml"
  
    ViewData["Title"] = "Summary";

#line default
#line hidden
            BeginContext(45, 397, true);
            WriteLiteral(@"<style>
    #tblReference_filter input {
        width: 80px;
    }
    .dataTables_length {
        display: none;
    }

</style>
<div class=""row wrapper border-bottom white-bg page-heading"">
    <div class=""col-lg-11"">
        <h2>
            Fuel Oil Liquidation Summary
        </h2>
        <ol class=""breadcrumb"">
            <li class=""breadcrumb-item"">
                <a");
            EndContext();
            BeginWriteAttribute("href", " href=\"", 442, "\"", 476, 1);
#line 21 "E:\Projects\FODL\FODL\FODLSystem\Views\FuelOil\Summary.cshtml"
WriteAttributeValue("", 449, Url.Action("Index","Home"), 449, 27, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(477, 829, true);
            WriteLiteral(@">Home</a>
            </li>
            <li class=""breadcrumb-item"">
                <a>Fuel Oil Liquidation</a>
            </li>
            <li class=""breadcrumb-item active"">
                <strong>
                    Summary
                </strong>
            </li>
        </ol>
    </div>
</div>
<div class=""wrapper wrapper-content animated fadeInRight"">
    <div class=""row"">
        <div class=""col-lg-12"">
            <div class=""ibox "">
                <div class=""ibox-title"">
                    <h5>
                        List
                    </h5>
                    <div class=""ibox-tools"">
                        <a class=""collapse-link"">
                            <i class=""fa fa-chevron-up""></i>
                        </a>
                        <a class=""close-link""");
            EndContext();
            BeginWriteAttribute("href", " href=\"", 1306, "\"", 1340, 1);
#line 46 "E:\Projects\FODL\FODL\FODLSystem\Views\FuelOil\Summary.cshtml"
WriteAttributeValue("", 1313, Url.Action("Index","Home"), 1313, 27, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1341, 3036, true);
            WriteLiteral(@">
                            <i class=""fa fa-times""></i>
                        </a>
                    </div>
                </div>
                <div class=""ibox-content"">
                    <div class=""row"">
                        <div class=""col-sm-3"">
                               <table id=""tblReference"" class=""table table-striped table-no-bordered table-hover dataTable"" style=""width: 100%!important"">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>Reference No</th>
                                        <th>Id</th>
                                        <th>Dispenser / Lubetruck</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class=""col-sm-9"">
                            <table style=""width:500px"">
             ");
            WriteLiteral(@"                   <tr>
                                    <td>Batch No. : &nbsp;</td>
                                    <td><input class=""form-control"" id=""txtBatchNo"" type=""text"" /></td>
                                    <td style=""width:20px""></td>
                                    <td>
                                        <a href=""#"" onclick=""uploadNavision();"" class=""anchorAction btn btn-primary btn-bitbucket"">
                                            <i class=""fa fa-upload""></i>
                                            <span>&nbsp;Upload to Navision</span>
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            <table id=""tbl"" class=""table table-striped table-no-bordered table-hover dataTable"" style=""width: 100%!important;"">
                                <thead>
                                    <tr>
                                     ");
            WriteLiteral(@"   <th>Reference No</th>
                                        <th>Entry Type</th>
                                        <th>Item No.</th>
                                        <th>Posting Date</th>
                                        <th>Document Date</th>
                                        <th>Qty. to Request</th>
                                        <th>Equipment Nos. Code</th>
                                        <th>Office Code</th>
                                        <th>Fuel Code</th>
                                        <th>Location Code</th>
                                        <th>Dept. Code</th>
                                        <th>Job Card No.</th>
                                    </tr>
                                </thead>

                            </table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

");
            EndContext();
            DefineSection("Scripts", async() => {
                BeginContext(4394, 751, true);
                WriteLiteral(@"
    <script>

    </script>
    <script>
    var strReference = '';
    $(function () {



        $(""input[type=text]"").keyup(function () {
            $(this).val($(this).val().toUpperCase());
        });

        loadDatatable(""0"");
        //loadDatatableReference();
        });

       // var tblReference = $(""#tblReference"").DataTable();
        var table = $(""#tblReference"").DataTable({
            //select: {
            //    style: 'multiple'
            //},
            ""processing"": true,
            ""serverSide"": true,
            ""searching"": true,
            ""fixedHeader"": true,
            ""bLengthChange"": false,
            ""order"": [[2, ""desc""]],
            ""ajax"": {
                ""url"": """);
                EndContext();
                BeginContext(5146, 33, false);
#line 137 "E:\Projects\FODL\FODL\FODLSystem\Views\FuelOil\Summary.cshtml"
                   Write(Url.Action("getDataReferenceNo2"));

#line default
#line hidden
                EndContext();
                BeginContext(5179, 3933, true);
                WriteLiteral(@""",
                ""type"": ""POST"",
                ""datatype"": ""json""
            },
            drawCallback: function () {
                $('input[type=""checkbox""]').iCheck({
                    checkboxClass: 'icheckbox_square-green',
                    radioClass: 'iradio_square-green',
                });
            },
               aoColumnDefs: [
                {
                    'targets': 0,
                    'render': function (data, type, row, meta) {
                        if (type === 'display') {

                            data = '<div class=""checkbox""><input type=""checkbox"" class=""dt-checkboxes""><label></label></div>';


                        }

                        return data;
                    },
                    'checkboxes': {
                        'selectRow': true,
                        'selectCallback': function (nodes, selected) {
                            $('input[type=""checkbox""]', nodes).iCheck('update');
                      ");
                WriteLiteral(@"  },
                        'selectAllCallback': function (nodes, selected, indeterminate) {
                            $('input[type=""checkbox""]', nodes).iCheck('update');
                        }
                    }
                },


                ],
            ""columns"": [
                {
                    ""data"": null //0
                },

                { ""data"": ""referenceNo"", ""name"": ""ReferenceNo"", ""autoWidth"": true },
                { ""data"": ""id"", ""class"": ""idClass"", ""name"": ""id"", visible:false },
                { ""data"": ""dispenserCode"",  ""name"": ""DispenserCode"" },
            ]
    });

        $('.dt-checkboxes-select-all').empty();
        // Handle iCheck change event for ""select all"" control
        $(table.table().container()).on('ifChanged', '.dt-checkboxes-select-all input[type=""checkbox""]', function (event) {

            //var col = tblTransmit.column($(this).closest('th'));
            //col.checkboxes.select(this.checked);

            if (t");
                WriteLiteral(@"his.checked) {
                $('input.dt-checkboxes:not(.all)').parents('tr').addClass('selected');
                //dt-checkboxes
                $('.dt-checkboxes').iCheck('check');
            }
            else {
                $('input.dt-checkboxes:not(.all)').parents('tr').removeClass('selected');
                $('.dt-checkboxes').iCheck('uncheck');
            }

        });
        var jdata = [];
        // Handle iCheck change event for checkboxes in table body
        $(table.table().container()).on('ifChanged', '.dt-checkboxes', function (event) {
            var cell = table.cell($(this).closest('td'));

            cell.checkboxes.select(this.checked);
            jdata = [];
            var $irows = $(this).parents('tr');
            if (this.checked) {
                $irows.addClass('selected');
                LoadDetailsData();

            }
            else {
                $irows.removeClass('selected');
                LoadDetailsData();
            }");
                WriteLiteral(@"
        });

        function LoadDetailsData() {
            
            var data = table.rows('.selected').data();
            for (var i = 0; i < data.length; i++) {
                //if (strReference != '') {
                //    strReference += "","";
                //}
               // strReference += data[i]['id'];
                if ($.inArray(data[i]['id'], jdata)) {
                    // the value is in the array
                    jdata.push(data[i]['id']);
                }

            }
           // if (strReference == '') { strReference = ""0"" }

            loadDatatable(strReference);
        }
    function loadDatatable(refid) {
        var data = [];
        if ($.fn.DataTable.isDataTable('#tbl')) {
            $('#tbl').DataTable().destroy();
        }
    
    
        $.ajax({
            url: """);
                EndContext();
                BeginContext(9113, 28, false);
#line 247 "E:\Projects\FODL\FODL\FODLSystem\Views\FuelOil\Summary.cshtml"
             Write(Url.Action("getDataSummary"));

#line default
#line hidden
                EndContext();
                BeginContext(9141, 3075, true);
                WriteLiteral(@"""
            , data: { refid: jdata.join()}
                            , method: ""POST""
                            , dataType: 'json'

                            , success: function (responsedata) {

                                if (responsedata.status == ""success"") {


                                    for (var i = 0; i < responsedata.data.length; i++) {



                                        data.push([responsedata.data[i].referenceNo,
                                            responsedata.data[i].entryType, responsedata.data[i].itemNo
                                            , moment(responsedata.data[i].postingDate).format(""MM/DD/YYYY"")
                                            , moment(responsedata.data[i].documentDate).format(""MM/DD/YYYY"")
                                            , responsedata.data[i].qty, responsedata.data[i].equipmentCode
                                            , responsedata.data[i].officeCode, responsedata.data[i].fuelCode
            ");
                WriteLiteral(@"                                , responsedata.data[i].locationCode, responsedata.data[i].departmentCode
                                            ,responsedata.data[i].jobCardNo,
                                            ]);

                                    }

                                    $('#tbl').DataTable({
                                        select: {
                                            style: 'single'
                                        },
                                        ""data"": data,
                                        ""responsive"": true,
                                        ""lengthMenu"": [[10, 25, 50, 100, -1], [10, 25, 50, 100, ""All""]],
                                        ""columnDefs"": [

                                        ],
                                    });
                                } else {
                                    toastr[""error""](responsedata.message)
                                    toastr.options");
                WriteLiteral(@" = {
                                        ""closeButton"": true
                                    }
                                }

                            }
        });

    }

    function uploadNavision() {

        if ($.trim($(""#txtBatchNo"").val()) == """") {
            toastr[""error""](""Please fill out batch no."")
            toastr.options = {
                ""closeButton"": true
            }
            return false;
        }


       // var table = $('#tbl').DataTable();
      //  $rowCount = table.data().count();

        //if ($rowCount == 0) {
        //    toastr[""error""](""No data to be uploaded"")
        //    toastr.options = {
        //        ""closeButton"": true,
        //        ""showDuration"": ""3000"",
        //    }
        //    return false;
        //}

        if (!confirm('Do you wish to proceed in uploading of data to Navision? This cannot be undone')) {
            return false;
        }

         $.ajax({
                        url");
                WriteLiteral(": \"");
                EndContext();
                BeginContext(12217, 40, false);
#line 324 "E:\Projects\FODL\FODL\FODLSystem\Views\FuelOil\Summary.cshtml"
                         Write(Url.Action("uploadNavision","Utilities"));

#line default
#line hidden
                EndContext();
                BeginContext(12257, 3809, true);
                WriteLiteral(@"""
                            , method: ""POST""
                            , dataType: 'json'
             , data: { batchno: $(""#txtBatchNo"").val(), refid: jdata.join()}
                            , success: function (responsedata) {
                                console.log(responsedata);
                                if (responsedata.status == ""success"") {

                                

                                    toastr.success(
                                        ""Successfully uploaded to "",
                                        'Navision',
                                        {
                                            timeOut: 200,
                                            fadeOut: 200,
                                            onHidden: function () {
                                                window.location.reload();
                                            }
                                        }
                                    );
 ");
                WriteLiteral(@"                                   return;

                                  //  loadDatatable();
                                  // $('#tblReference').DataTable().ajax.reload();
                                   // window.location.reload();

                                }
                                else if (responsedata.status == ""warning"") {
                                    //toastr.options = {
                                    //    closeButton: true,
                                    //    extendedTimeOut: 0,
                                    //    timeOut: 0,
                                    //    tapToDismiss: false
                                    //};

                                    //toastr[""warning""](""Some of the items were partially uploaded to Navision. Please see details : <br /><br />"" + responsedata.message)
                                    //toastr.options = {
                                    //    ""closeButton"": true
                    ");
                WriteLiteral(@"                //}

                                    //loadDatatable();
                                    //  $('#tblReference').DataTable().ajax.reload();
                                    toastr.error(
                                        ""Some of the items were partially uploaded to Navision. Please see details : <br /><br />"" ,
                                        responsedata.message,
                                        {
                                            timeOut: 200,
                                            fadeOut: 200,
                                            onHidden: function () {
                                                window.location.reload();
                                            }
                                        }
                                    );

                                }
                                else {

                                    //toastr.options = {
                                    //");
                WriteLiteral(@"    closeButton: true,
                                    //    extendedTimeOut: 0,
                                    //    timeOut: 0,
                                    //    tapToDismiss: false
                                    //};

                                    toastr[""error""](responsedata.message)
                                    toastr.options = {
                                        ""closeButton"": true
                                    }

                                    loadDatatable();
                                    //loadDatatableReference();
                                }
                               
                            }
        });
    }

    </script>
");
                EndContext();
            }
            );
            BeginContext(16069, 4, true);
            WriteLiteral("\r\n\r\n");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
